@model WebTruyenTranhDataAccess.Models.Message;
@{

    Layout = "_Layoutpage";


}
@using System.Web.Mvc.Html;




<main role="main" class="pb-3" style="margin-top: 150px; width: 80vw; ">

    <section class="ftco-section" style="height: 1200px; width:100%">
        <div class="columns is-mobile" style="width: 100%;" >
            <div class="column is-3   block-3  "  data-scrollax-parent="true" style="margin-right:25px; margin-left:20px;">
                

                <div  style="height:60%; width:100%;">
                    <img class="is-rounded" src="@ViewBag.profile.Avartar" style="height:100%; width:100%; border-radius:50%;" />
                </div>
                      
                        <h1 class="subheading" style="word-wrap: break-word; margin:30px 0px 0px 0px; font-size:36px; width: 100%;">@ViewBag.profile.DisplayName</h1>
                        <p class="subheading" style="word-wrap: break-word; margin: 15px 0px 0px 0px; padding: 0; width: 100%; font-style: italic; ">date join: @ViewBag.profile.DateJoined</p>
                        <p class="subheading" style="word-wrap: break-word; margin: 15px 0px 0px 0px; padding: 0; width: 100%; font-style: italic; ">@ViewBag.profile.Description</p>
                        @if (!ViewBag.isMe)
                        {
                        }
                        else
                        {<a href='@Url.Action("EditProfile")' type="button" class="button is-primary is-outlined is-fullwidth" style="margin-top:15px;">Edit profile</a>
                        }


              


            </div>
            <div class="column is-6 "  data-scrollax-parent="true" style="margin-right:50px;">
              

                    <form style=" width: 100%;" method="post" asp-action="Message" asp-controller="Profile"  asp-route-ReturnUrl="@Context.Request.Path">
                        <div class="control " style=" width: 100%;">
                            <input hidden value="@ViewBag.profile.Account.Id" name="Id" />
                            @*neu model valid *@

                            @if (!ViewData.ModelState.IsValid)
                            {
                                <div class="notification is-warning">
                                    <span asp-validation-for="Content">

                                    </span>
                                </div>
                            }

                            <textarea class="textarea is-medium " placeholder="Send your message" style="min-height:100px;" asp-for="Content" required></textarea>
                            <button class="button is-primary is-inverted is-medium" style="margin: 5px; float:right;">Send</button>

                        </div>
                    </form>

                    <!--comment block-->
                    <div class="block" style="width: 100%; overflow: auto;">


                        @await Component.InvokeAsync("Firstloadmessage", new { Id = @ViewBag.profile.Account.Id ,profileId= @ViewBag.profile.Id })


                    </div>
            
            </div>
            <div class="column is-3" data-scrollax-parent="true" >


                <h2 class="subtitle  is-2" style="text-align:center;">Mine novels</h2>
                @if (!ViewBag.isany)
                {
                    <h6 class="subtitle  is-2" style="text-align:center; color:gray;">No novel </h6>
                }
                else
                {

                    foreach (var novel in ViewBag.novels)
                    {
                        <div class="box row" style=" height:70px;">
                            novel.Title
                        </div>
                    }


                }




            </div>
        </div>
    </section>
</main>
